<!-- <button mat-raised-button (click)="isEditable = !isEditable">
  {{!isEditable ? 'Enable edit mode' : 'Disable edit mode'}}
</button> -->
<div class="container">
  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start" dynamicHeight>
    <mat-tab label="Nuevo Paciente">
      <form [formGroup]="userForm" autocomplete="off" (ngSubmit)="onSave()">
        <div class="grid pt-4">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Fecha Ingreso</mat-label>

              <input
                matInput
                [matDatepicker]="pickerDateAdmission"
                formControlName="admissionDate"
              />
              <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
              <mat-datepicker-toggle
                matIconSuffix
                [for]="pickerDateAdmission"
              ></mat-datepicker-toggle>
              <mat-datepicker #pickerDateAdmission></mat-datepicker>
            </mat-form-field>
          </div>
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Programa</mat-label>
              <mat-select formControlName="program">
                @for (program of programs; track $index) {
                  <mat-option value={{program._id}}>{{program.name}}</mat-option>
                }
              </mat-select>
              <span *ngIf="isValidField('program')" class="text-red-500">
                Debe seleccionar un programa
              </span>
            </mat-form-field>
          </div>
        </div>

        <div class="grid">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>RUT</mat-label>
              <input
                matInput
                formControlName="rut"
                placeholder="11.222.333-4"
              />
              <span *ngIf="isValidField('rut')" class="form-text text-danger">
                El nombre es requerido
              </span>
              <mat-icon matSuffix>person</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Nombre</mat-label>
              <input matInput formControlName="name" placeholder="Nombre" />
              <span *ngIf="isValidField('name')" class="form-text text-danger">
                El nombre es requerido
              </span>
              <mat-icon matSuffix>person</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
        </div>

        <div class="grid">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Apellido Paterno</mat-label>
              <input matInput formControlName="surname" />
              <span
                *ngIf="isValidField('surname')"
                class="form-text text-danger"
              >
                Requerido
              </span>
              <mat-icon matSuffix>person</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Apellido Materno</mat-label>
              <input matInput formControlName="secondSurname" />
              <span
                *ngIf="isValidField('secondSurname')"
                class="form-text text-danger"
              >
                Requerido
              </span>
              <mat-icon matSuffix>person</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
        </div>

        <div class="grid">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Fecha Nacimiento</mat-label>
              <input
                matInput
                [matDatepicker]="pickerBirthday"
                formControlName="birthDate"
              />
              <!-- <mat-hint>MM/DD/YYYY</mat-hint> -->
              <mat-datepicker-toggle
                matIconSuffix
                [for]="pickerBirthday"
              ></mat-datepicker-toggle>
              <mat-datepicker #pickerBirthday></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Sexo</mat-label>
              <mat-select formControlName="sex">
                <mat-option value="1">Hombre</mat-option>
                <mat-option value="2">Mujer</mat-option>
              </mat-select>
              <span *ngIf="isValidField('sex')" class="text-red-500">
                Debe seleccionar un programa
              </span>
            </mat-form-field>
          </div>
        </div>

        <div class="grid">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Region</mat-label>
              <mat-select formControlName="region">
                <mat-option value="">Seleccione</mat-option>
                <mat-option value="1">DE TARAPACA</mat-option>
                <mat-option value="2">DE ANTOFAGASTA</mat-option>
                <mat-option value="3">DE ATACAMA</mat-option>
                <mat-option value="4">DE COQUIMBO</mat-option>
                <mat-option value="5">DE VALPARAISO</mat-option>
                <mat-option value="6"
                  >DEL LIBERTADOR GENERAL BERNARDO OHIGGINS</mat-option
                >
                <mat-option value="7">DEL MAULE</mat-option>
                <mat-option value="8">DEL BIO-BIO</mat-option>
                <mat-option value="9">DE LA ARAUCANIA</mat-option>
                <mat-option value="10">DE LOS LAGOS</mat-option>
                <mat-option value="11"
                  >DE AYSEN DEL GENERAL CARLOS IBAÑES DEL CAMPO</mat-option
                >
                <mat-option value="12"
                  >DE MAGALLANES Y LA ANTARTICA CHILENA</mat-option
                >
                <mat-option value="13">METROPOLITANA</mat-option>
                <mat-option value="14">DE LOS RIOS</mat-option>
                <mat-option value="15">DE ARICA Y PARINACOTA</mat-option>
                <mat-option value="16">DE ÑUBLE</mat-option>
              </mat-select>
              <span *ngIf="isValidField('region')" class="text-red-500">
                Debe seleccionar una region
              </span>
            </mat-form-field>
          </div>
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Teléfono</mat-label>
              <input
                matInput
                formControlName="phone"
                placeholder="Ej: +56969691818"
              />
              <span *ngIf="isValidField('phone')" class="text-red-500">
                El teléfon es obligatorio
              </span>

              <mat-icon matSuffix>phone</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
        </div>

        <div class="grid">
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Teléfono Familiar</mat-label>
              <input
                matInput
                formControlName="phoneFamily"
                placeholder="Ej: +56969691818"
              />
              <span *ngIf="isValidField('phoneFamily')" class="text-red-500">
                El teléfon es obligatorio
              </span>

              <mat-icon matSuffix>phone</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
          <div class="col-4">
            <mat-form-field class="w-full" appearance="outline">
              <mat-label>Centro de origen</mat-label>
              <input matInput formControlName="centerOrigin" placeholder="Centro de origen" />
              <span *ngIf="isValidField('centerOrigin')" class="form-text text-danger">
                El centro es requerido
              </span>
              <mat-icon matSuffix>person</mat-icon>
              <!-- <mat-hint>Hint</mat-hint> -->
            </mat-form-field>
          </div>
        </div>

        <button
          mat-stroked-button
          color="primary"
          routerLink="../"
          class="mr-1"
        >
          Volver
        </button>
        <button mat-flat-button type="submit" color="primary">Registrar</button>
        @if(registered){
          <button mat-flat-button color="primary">Ficha Demanda</button>
        }
      </form>
    </mat-tab>
  </mat-tab-group>
</div>
